<!doctype html>
<html>
  <head>
    <title>Welcome to <%=shopName%></title>
    <link rel="stylesheet"  type="text/css" href="main.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
  </head>
  <body>
    <div class="navbar" id="myNav">
      <a href="#" class="icon" onclick="toggleMenu()">
        <i class="fas fa-bars" style="color: #fff;"></i>
      </a>
      <div class="nav-links">
        <a href="/" >Home</a>
        <a href="addfood" >Add your food</a>
        <a href="search"  >Search for food</a>
        <a href="searchupdate">Update food</a>
        <a href="listfood" class="active">Food list</a>
        <a href="login">Login</a>
        <a href="register">Register with us</a>
        <a href="logout">Logout</a>
      </div>
    </div>

    <table>
      <h1 style="text-align: center;">Here are the food that we have:</h1>
    <thead>
        <tr>
            <th>NAME</th>
            <th>VALUE</th>
            <th>UNIT</th>
            <th>CARBS</th>
            <th>FAT</th>
            <th>PROTEIN</th>
            <th>SALT</th>
            <th>SUGAR</th>
            <th>AUTHOR</th>
            <th>CHECKBOX</th>
            <th>QUANTITY</th>

        </tr>

    </thead>
    <tbody id = "table">
            <% for(var i=0; i< food.length; i++) {%>
                <tr>
                    <td data-label="NAME"><%=food[i].name%></td>
                    <td data-label="VALUE" id="value<%=i%>"><%=food[i].value%></td>
                    <td data-label="UNIT" id="unit<%=i%>"><%=food[i].unit%></td>
                    <td data-label="CARBS" id="carbs<%=i%>"><%=food[i].carbs%></td>
                    <td data-label="FAT" id="fat<%=i%>"><%=food[i].fat%></td>
                    <td data-label="PROTEIN" id="protein<%=i%>"><%=food[i].protein%></td>
                    <td data-label="SALT" id="salt<%=i%>"><%=food[i].salt%></td>
                    <td data-label="SUGAR" id="sugar<%=i%>"><%=food[i].sugar%></td>
                    <td data-label="AUTHOR" id="author<%=i%>"><%=food[i].author%></td> 
                    <td data-label="SELECT"><input id="checkbox<%=i%>" type="checkbox" name="checkbox<%=i%>"></td>
                    <td data-label="QUANTITY"><input  id="quantity<%=i%>" name="quantity<%=i%>" value="1" type="number" min="1"></td>
      </tr>
               
            <% } %>   
             
    </tbody>
    
        </table>

<input onclick="calculate()" type="submit" value="calculate">
<div>
<table>
  <thead>
    <tr >
      <th>Nutritional Information</th>
      <th>Total</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Total carbs:</td>
      <td id="sumCarbs">0</td>
    </tr>
    <tr>
      <td>Total fat:</td>
      <td id="sumFat">0</td>
    </tr>
    <tr>
      <td>Total protein:</td>
      <td id="sumProtein">0</td>
    </tr>
    <tr>
      <td>Total salt:</td>
      <td id="sumSalt">0</td>
    </tr>
    <tr>
      <td>Total sugar:</td>
      <td id="sumSugar">0</td>
    </tr>
  </tbody>
</table>
</div>


       
        
      
        <script>
          function calculate()
          {
            var totalCarbs =0;
            var totalFat =0;
            var totalProtein =0;
            var totalSalt = 0;
            var totalSugar=0;

            for(i=0; i<table.rows.length-1; i++)
            {
              if(document.getElementById(`checkbox${i}`).checked)
              {
                let carbs = parseFloat(document.getElementById(`carbs${i}`).innerHTML);
                let fat = parseFloat(document.getElementById(`fat${i}`).innerHTML);
                let protein = parseFloat(document.getElementById(`protein${i}`).innerHTML);
                let salt = parseFloat(document.getElementById(`salt${i}`).innerHTML);
                let sugar = parseFloat(document.getElementById(`sugar${i}`).innerHTML);

                totalCarbs += parseFloat(document.getElementById(`quantity${i}`).value) * carbs;
                totalFat += parseFloat(document.getElementById(`quantity${i}`).value) * fat;
                totalProtein += parseFloat(document.getElementById(`quantity${i}`).value) * protein;
                totalSalt += parseFloat(document.getElementById(`quantity${i}`).value) * salt;
                totalSugar += parseFloat(document.getElementById(`quantity${i}`).value) * sugar;

                document.getElementById(`sumCarbs`).innerHTML = totalCarbs.toFixed(2);
                document.getElementById(`sumFat`).innerHTML = totalFat.toFixed(2);
                document.getElementById(`sumProtein`).innerHTML = totalProtein.toFixed(2);
                document.getElementById(`sumSalt`).innerHTML =  totalSalt.toFixed(2);
                document.getElementById(`sumSugar`).innerHTML =  totalSugar.toFixed(2);

              }
            }
          }
    

        </script>

<script>
  function toggleMenu() {
   var x = document.getElementById("myNav");
   if (x.className === "navbar") {
     x.className += " responsive";
   } else {
     x.className = "navbar";
   }
 }
 
    </script>
    </body>
</html>







  